//
// Created by tomgi on 09/11/2025.
//

#include "../Header/Tile.h"
#include "cmath"
#include <cstdlib>
#include <iostream>

using namespace std;

Tile::Tile(int playerNb) {
    this->playerNb = playerNb;
    this->tilesNb = static_cast<int>(round(10.67 * playerNb));
    cout << "tiles nb   : " << this->tilesNb << endl;

    this->tiles = { // y :0 , x :0
        // ---- Tile 0 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+1, +2}
        },
        // ---- Tile 1 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {-1, +2},
            {+1, +2}
        },
        // ---- Tile 2 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {-1, +1},
            {+1, +1},

        },
        // ---- Tile 3 ----
        {
            {0, 0},
            {0, +1},
            {-1, +1},
            {-2, +1},
            {-2, +2}
        },
        // ---- Tile 4 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {-1, +1}
        },
        // ---- Tile 5 ----
        {
            {0, 0},
            {+1, 0},
            {0, +1},
            {+1, +1}
        },
        // ---- Tile 6 ----
        {
            {0, 0},
            {-1, 0},
            {-2, 0},
            {-3, 0},
            {0, +1},
            {-3, +1}
        },
        // ---- Tile 7 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {0, +3}
        },
        // ---- Tile 8 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 9 ----
        {
            {0, 0},
            {-1, 0},
            {-1, +1}
        },
        // ---- Tile 10 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 11 ----
        {
            {0, 0},
            {0, +1},

        },
        // ---- Tile 12 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {-1, 0},
            {-2, 0},
            {-3, +1}
        },
        // ---- Tile 13 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {-1, 0},
            {-2, 0},
            {-3, 0},
        },
        // ---- Tile 14 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+1, +3},
            {+2, +3},
            {+2, +4},
            {+3, +3},
            {+3, +4},
        },
        // ---- Tile 15 ----
        {
            {0, 0},
            {+1, +1},
            {0, +1},
            {-1, 0},
            {-1, -1},
            {-2, -1},
        },
        // ---- Tile 16 ----
        {
            {0, 0},
            {+1, +1},
            {0, +1},
            {0, +2},
            {-1, 0},
            {-1, +1},

        },
        // ---- Tile 17 ----
        {
            {0, 0},
            {-1, 0},
            {-2, 0},
            {-2, +1},
            {-3, 0},
        },
        // ---- Tile 18 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {-1, 0},
            {-1, -1},
        },
        // ---- Tile 19 ----
        {
               {0, 0},
               {0, +1},
               {+1, +1},
                {-1, 0},
                {-1, +1},
                {-1, +2},
        },
        // ---- Tile 20 ----
        {
            {0, 0},
            {-1, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1},
        },
        // ---- Tile 21 ----
        {
            {0, 0},
            {0, +1},
            {-1, +1},
            {-2, +1},
            {-3, +1}
        },
        // ---- Tile 22 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {-1, +1},
            {-2, +1},
            {-3, +1},
        },
        // ---- Tile 23 ----
        {
            {0, 0},
            {-1, 0},
            {-1, +1},
            {-2, +1},
            {-2, +2},
            {-3, +2},
            {-3, +3},
        },
        // ---- Tile 24 ----
        {
            {0, 0},
            {-1, 0},
            {-1, +1},
            {-1, +2},
            {-2, +2},
            {-3, +2},
        },
        // ---- Tile 25 ----
        {
            {0, 0},
            {-1, 0},
            {-1, +1},
            {-2, 0},
            {-2, +1},
            {-3, 0},
        },
        // ---- Tile 26 ----
        {
            {0, 0},
            {+1, 0},
            {+1, -1},
            {+2, -1}
        },
        // ---- Tile 27 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2}
        },
        // ---- Tile 28 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, -1}
        },
        // ---- Tile 29 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+1, +1}
        },
        // ---- Tile 30 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 31 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, +1},
            {+1, -1}
        },
        // ---- Tile 32 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 33 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 34 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 35 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, 0},
            {+2, 0}
        },
        // ---- Tile 36 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+2, +1}
        },
        // ---- Tile 37 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+1, +1}
        },
        // ---- Tile 38 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {0, +3},
            {+1, +1}
        },
        // ---- Tile 39 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {0, +3},
            {+1, +2}
        },
        // ---- Tile 40 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 41 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, -1},
            {+3, -1}
        },
        // ---- Tile 42 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +2},
            {+1, +3}
        },
        // ---- Tile 43 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 44 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, +1},
            {+3, +1}
        },
        // ---- Tile 45 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, 0},
            {+1, +2}
        },
        // ---- Tile 46 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, -1},
            {+1, +1}
        },
        // ---- Tile 47 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 48 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+2, -1}
        },
        // ---- Tile 49 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+1, -1}
        },
        // ---- Tile 50 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+1, +3}
        },
        // ---- Tile 51 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, +1},
            {+3, +1}
        },
        // ---- Tile 52 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+2, +1}
        },
        // ---- Tile 53 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+3, +1}
        },
        // ---- Tile 54 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, 0},
            {+2, 0}
        },
        // ---- Tile 55 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+3, 0},
            {+1, +1}
        },
        // ---- Tile 56 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 57 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, -1},
            {+3, -1}
        },
        // ---- Tile 58 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 59 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 60 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+1, +2}
        },
        // ---- Tile 61 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, +1},
            {+1, -1}
        },
        // ---- Tile 62 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, +1},
            {+3, +1}
        },
        // ---- Tile 63 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+3, +1}
        },
        // ---- Tile 64 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+2, 0},
            {+1, -1}
        },
        // ---- Tile 65 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 66 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 67 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+1, +1},
            {+1, +2}
        },
        // ---- Tile 68 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 69 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 70 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +2},
            {+2, +1}
        },
        // ---- Tile 71 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+2, 0},
            {+2, -1}
        },
        // ---- Tile 72 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, 0},
            {+3, 0}
        },
        // ---- Tile 73 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 74 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 75 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, 0},
            {+2, +1}
        },
        // ---- Tile 76 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 77 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+2, 0},
            {+3, 0}
        },
        // ---- Tile 78 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+1, -1},
            {+2, +1}
        },
        // ---- Tile 79 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 80 ----
        {
            {0, 0},
            {0, +1},
            {0, +2},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 81 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, -1},
            {+1, +1}
        },
        // ---- Tile 82 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +2}
        },
        // ---- Tile 83 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+1, +1},
            {+2, +1}
        },
        // ---- Tile 84 ----
        {
            {0, 0},
            {0, +1},
            {+1, 0},
            {+1, +1},
            {+1, +2}
        },
        // ---- Tile 85 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+2, +1},
            {+2, +2}
        },
        // ---- Tile 86 ----
        {
            {0, 0},
            {+1, 0},
            {+1, +1},
            {+1, -1},
            {+2, 0}
        },
        // ---- Tile 87 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+1, +2},
            {+2, +1}
        },
        // ---- Tile 88 ----
        {
            {0, 0},
            {0, +1},
            {+1, +1},
            {+2, +1},
            {+1, +2}
        },
        // ---- Tile 89 ----
        {
            {0, 0},
            {+1, 0},
            {+2, 0},
            {+2, +1},
            {+1, +1}
        },
        // ---- Tile 1X1 ----
        {
                {0, 0}
        }
    };

    this->usedTiles = {};

}

void Tile::addUsedTiles() {
    for (int i = 0; i < getTilesNb() ; i++) {
        this->usedTiles.push_back(getTiles()[i]);
    }
    this->usedTiles.push_back(getTiles()[90]);
}

void Tile::shuffleTiles() {
    for (int i = 0; i < this->usedTiles.size(); ++i) {
        int j = rand() % this->usedTiles.size();
        std::swap(this->usedTiles[i], this->usedTiles[j]);
    }
}

vector<vector<vector<int>>> Tile::getTiles() {
    return this->tiles;
}

vector<vector<vector<int>>> &Tile::getUsedTiles() {
    return this->usedTiles;
}

int Tile::getPlayerNb() const {
    return this->playerNb;
}

int Tile::getTilesNb() const {
    return this->tilesNb;
}





